<div ng-controller="MontagemController as Montagem" ng-init="Montagem.listarTudo(); Montagem.calcularTempoDeEntrega();">
    <div class="container">
        <h2>Monte sua Pizza</h2>
        <form>
            <div class="row form-group">
                <legend>Pizza</legend>
                <div>
                    <select ng-model="Montagem.pedido.sabor" ng-change="Montagem.selecionarPizza()">
                        <option value="">Escolha o Sabor da Pizza</option>
                        <option ng-repeat="pizza in Montagem.sabores" value="{{pizza.id}}"
                                ng-bind="pizza.sabor"></option>
                    </select>
                    <div class="ingredientes" ng-show="Montagem.pizzaSelecionada">
                        <span ng-repeat-start="ingrediente in Montagem.pizzaSelecionada.ingredientes"
                                ng-bind="ingrediente.ingrediente"></span><span ng-repeat-end ng-hide="$last">, </span>
                    </div>
                </div>
            </div>
            <div ng-bind="Montagem.ingredientesSelecionados | json"></div>
            <div class="row form-group">
                <legend>Adicione Ingredientes</legend>
                <div>
                    <div class="form-check" ng-repeat="ingrediente in Montagem.ingredientes | orderBy: 'ingrediente'">
                        <label class="form-check-label">
                            <input type="checkbox" class="form-check-input" value="{{ingrediente.id}}"
                                   ng-checked="Montagem.ingredientesSelecionados.indexOf(ingrediente.id) >= 0"
                                   ng-click="Montagem.trocarIngrediente(ingrediente); Montagem.calcularValorFinal()">
                            <span ng-bind="ingrediente.ingrediente"></span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="row form-group">
                <legend>Borda</legend>
                <div>
                    <select ng-model="Montagem.pedido.borda" ng-change="Montagem.calcularValorFinal()">
                        <option value="0">Sem Borda</option>
                        <option ng-repeat="borda in Montagem.bordas" value="{{borda.id}}"
                                ng-bind="borda.borda"></option>
                    </select>
                </div>
            </div>


            <div class="row form-group">
                <legend>Tamanho</legend>
                <div>
                    <select ng-model="Montagem.pedido.tamanho" ng-change="Montagem.calcularValorFinal()">
                        <option value="">Escolha o Tamanho da Pizza</option>
                        <option ng-repeat="tamanho in Montagem.tamanhos" value="{{tamanho.id}}"
                                ng-bind="tamanho.tamanho"></option>
                    </select>
                </div>
            </div>


            <pre ng-show="Montagem.total" ng-bind="Montagem.total | json"></pre>

            <h2 ng-show="Montagem.total">
                Valor Total:
                R$ <span ng-bind="Montagem.total.total | number:2"></span>
            </h2>
            <h2>
                Tempo previso de Entrega:
                <span ng-bind="Montagem.tempoDeEntrega"></span> minutos
            </h2>



            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
    </div>
</div>